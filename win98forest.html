<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forest OS 98 - RudyWolf Edition</title>
    <script type="text/javascript" src="https://gc.kis.v2.scr.kaspersky-labs.com/FD126C42-EBFA-4E12-B309-BB3FDD723AC1/main.js?attr=NPonFq0DaCKN7Oy9b3p5sWT1Yf52JJgs01ntYIp7Ctn9ft9RZ4Zk0EF4YQLp5JNWtu-5xVDBdpV4BMuM4WYWISsLORzsL0hwMK5ku66hMTS9wfik8CANTcV5ovfWEALX6LlIxKMOFlY_K9ipLxfszSFKwOOju8AuL-ZbQr2G_xYNNqVL6mBYZcFWSrfgqqaJF9WQQUp34TEq5AnSs8VXxFrNWwKaGUTs16Qzxp4lUIwEq2mvU13WRYgeuSwyoeL61DNIkuAEJ6nfgxlSCLmdyqRka2IhO3wqEuEzp1GNEFcdNxRnoVwOcNGLsKnS52gYPUn1DY89911eeoEXV9EQQJVf0rpFQoeVyki9_u6TAJdZa9YyeiMZlTC_1mPL7fc-NwRrFkPhvmnFdrVOCta4iDQhl3cRLWXLl2fEjBf3_sUUO8zVPp-2YcGcTKYKt2PzUzzFZfC0QlzNpig446HfmB_Z-CHWxNE6YN4SfRa4OTBixzEQF6nuynh_keHriMlPe2SwN7iX6oXgoCTcn16GUyj_yahclFEC6Nkpv3khxhIM6QyvgeEX_eNXMJXCMFSmewpREtAh08fL9QExHZYVwzus3x1XSuUW5Shi2haiU0qfr4MLrwUn2Xcsj3fORJEEeAXb_rtzgwtLAE4PSwOiyl4jK4rHTc5rNaN0NZkmFBAe0rTUCirxbNUdUogpcFLdCJ8ePQpbxehZCz9ukeTS3UPutRjR0BGJ9je3b7cC3p3zIMc15m0bhtrqbxlDSp4rkHYJY6_0sGyeerH69LMhLcOs85Zoa_-iSX39gCvO4pEfqxyz0oI7J8wRPs6ytfGpEd6QkTXp4jDHmRP8YuhTbt1cy7OJDBQhUSY1W6dFPhHppHQMUlP7QNlVMUsE-c0kBh91UEBIHal8oJYZfyRo8VH5iQFTg5LR0qj1UrKYwvqRiekVUZOU7xoiwIUbSyfkkpRUUs6QNyTc9xoBMNAV2F2YuhPadJAzkXUrQnk6G7T-kIC0LgZ9Q5qc4uatHSjFC-ezGCNLP9xnG82OtjvSjZxaasgpDuB_XO0RzRNcpDUO2f5o0PSQ-sK-lBQbpLtr1f0LQoWwco9WrXv8u0Q0oFEMnACX_K1VGlxAhz85-RqtuQKIdk8D14ZEqDBQdRLbw7_aZlEWXn1cDHFrPP3dKHefj6qq55_l0JYKNDRPAiUJb_BUwqRaRoMtFTEG3xRB5-p3X-bA5s4nAQWd2O7IJClaU2fq2J4HNwUndjv8Ma_zMwmUmsGmDHqAOD7I0wHJq4jsZrb4yEYDZsbd6EmjpnkaMVWzwAtHs9MZ-TADrvjpxUZ-R6igXyFS8yfHOEE5q0lgnJ2nSCnUykUenNdT2l_JCoi7mPEBvZ_m8LuHx44aixkvFTNYB_GoObD41uUOTmwjE-mZ4YMBUjRKRIt5ElKRC4HGnF3wl-2k64j90pY9eUWnhhxqD19a36_6K2UMKvdRrg39Y2wCDMnJLcm3QHiaeFNgZ4WdS17byj7QLCxBubWzQje7u6ntl-x9UgMh34mK9jgl94ixMgY9krYzv0ZJscFywYQtyQfU51S0KzrJgyyr2k9WeCNsQa6S0jzebV3gNEHbfI6CUUM4MLpdKaZB2zmFL3-q1Vjgg9Dv7HfjChfD0LhDwachl7IL-V0qG9jzcUoptVgvsCjmeGc13l8xjPteiNUz8tUrHQvp0b2OyQguVFnQ39BPwt5QCYYco2FLKMERqfZ9n8MQlIgYlv7gE88GtcNqd_xoUrSLNzsQB0UqLRuh61ievamYP65Ehlr5yRL0QZ0U7DDJbLYxPXf_vOG9N_mGkFsxXe99ncLibrK-VDdmwp1jwM7LLveD9VVCQUXvbmhQpdtkMzfNPShLLN-JMCVmc_rkN44RZhDgLeYWMB9pI8rjHbKAWTD3kJUFc71hXYpK9_qa6eD89-Eps6_p4xTRKEst3prioYAtZshB7yv0-80LQ_QMePjwJnt8L6oHf6COisxpN2-b1tQ10HQB6_3u_xTfyI07kjrB45-_BzPhSYzguR4BnzYoea7WQRjAhgldpwmL5uBZu3pPEOfBVxprzxfYSqEHsOkkX7rxg35FqnjSVxA0IQWtZU9nK5LZJH5SWylhSYV1owaqdj6vfsSWiSrdF5Xdvyey_8BAzaVLsMA2Rj-bSdFXriC1Kow2oRMnok3zxNzcQnyFAY_CogFuZ70ti4xOGqCIDWHkBKfBygljbJ0-kcOCuLRkB6nTVi6-HaPaDCbGUA" charset="UTF-8"></script><link rel="stylesheet" crossorigin="anonymous" href="https://gc.kis.v2.scr.kaspersky-labs.com/E3E8934C-235A-4B0E-825A-35A08381A191/abn/main.css?attr=aHR0cHM6Ly9wcGwtYWktY29kZS1pbnRlcnByZXRlci1maWxlcy5zMy5hbWF6b25hd3MuY29tL3dlYi9kaXJlY3QtZmlsZXMvNmEyZjYwMzZiNDA3NzAzNDU5YjE0Y2EyYjNiOGMxNmIvYjQ1MDI3OTUtYTdhYi00ODY3LTk4MzEtNjU4N2I2ODgwZjNlL2NhbnZhcy1hcHAvaW5kZXguaHRtbD9yZXNwb25zZS1jb250ZW50LWRpc3Bvc2l0aW9uPWF0dGFjaG1lbnQlM2IlMjBmaWxlbmFtZSUzZGluZGV4Lmh0bWwlM2IlMjBmaWxlbmFtZSUyYSUzZFVURi04JTI3JTI3aW5kZXguaHRtbCZBV1NBY2Nlc3NLZXlJZD1BU0lBMkYzRU1FWUUyNjJXS0tTQSZTaWduYXR1cmU9ZTc2MWtPUWVOZkdybVFoN2NSVngxYTZ2cTIwJTNkJngtYW16LXNlY3VyaXR5LXRva2VuPUlRb0piM0pwWjJsdVgyVmpFS2IlMmYlMmYlMmYlMmYlMmYlMmYlMmYlMmYlMmYlMmZ3RWFDWFZ6TFdWaGMzUXRNU0pJTUVZQ0lRQzBBakVBJTJmbEdJdlBSbzFiNDdybThsM0IxTGVIcDVxdGJRQ0JUdWJhWlRIZ0loQU5TZldHeHJackxSeFdSRUNsY29SVlN4eXlQUklXNGw0ejRIR2lndkhsS1BLdk1FQ0c4UUFSb01Oams1TnpVek16QTVOekExSWd3SHJqNWF5UDFMejBMRnNXY3EwQVM3QXF4V05WOW8yMGRvU3JOOG9OUjF1OHZ3eVo2dzFWNk4zUGtQSEVlSFF3ajlBOUhMaEVuSGtkNUJZdk1INWdIcnJkNnE3Vk1GVmQ0JTJmdkdwNnhRViUyZlNqbzREUzJpVVNFeG9vamlCRHlMU0F5TVNORjVmZjRFVEc3QWx2czdlTFpYRVVBem9pTm52R2RlbCUyYnVIc2s4TGhlMklIJTJieTZpaHYlMmIzJTJia05JdW5JUXpxTW1OJTJiUnNBUG84RVlsVm9aRnhQV3ByeU5JRVBqSWIxZXVvNHVvMzJLQkpsTDR2cFEwMEQ1eVJDYkhWQk5EVmVTNVoycDBYaDBKN0NGTENhbG9KSm0lMmJuMjd6RTJ1bzhMaklQSDlqWnJqJTJiOSUyYmhoZzJ5a0hxT1pRWWs1NnRYdVE1UjQ5aDN6d2J2WkdjVnBlUUdhZnB6aVJ3N0UzakczJTJmWUJjV3pxSnE0eldJS0kyQ1k0YU5Lc3dSOHlYUGpWZmVvVm8wc2V4U3dyaWxia1cxaFZCbEtjTG9JMUx1bEJLcnJoOUdIYTdVeGs3R2p6RGhwOEZpdkFxdTVTdlozdjRxQ05mSVVCcWtNa2Z0UzA0ZjBSaTRwRG81UlNmNkgzNm1nUHoyUW13anZDYXZSY3UlMmJXQ2hWJTJiY3lJSmgyZGt0UWJ4NXZVNDVFNFdCYnZ5ZUVoNGhPT2dPa0tZZ1FhbmRHcGh1V1VFT2lYRXhKbmFKdGFRUmFwSCUyZmFDMndxUFhUTTclMmZrNmg3ZzRIMGMwcWdVTWJreUp5cml0SldhMFdPYzBIYzJ5SVQ4R1p4UyUyYmg0N0NhSXloZ1Z6aGkxZTdHdUI3bVVNWVd1Z01MY1JTQnJZM3pHczR4T09sV092UG1LZkMlMmZtTU1RRHBBQkpYNkxPTVE3TzhsQ2oxSE9IeVl3YmFMVmZRZFQ2a25JMnhFcnVCVlI3bndxQnp2VFBRamYwcUdESGlIY2RvZ2trJTJiWGliVVR5VHBoRm1qUURHcXoyQTVESnZSRnBxM04xdzFwN21ZTWl0Z0tuSlRTZ29yRzhqeTBPTFpzTW96djJDSVVNTWZrbHNrR09wY0J2bGxjaFpySEZqMlFJT21ybFhzQUdZTERCOVh0NndRJTJidldRJTJmZ0s4UTlMWkV1QXhWRkF0R3RyYURhaGlja1NiRkxxazJETiUyZk1ySGklMmZudklMOEJGSkFORGpjUHF5S0pjWFNkSmI5NDRMY2dSJTJidGFHODI0WFFONnV6aCUyYmhZOCUyZnd4OGRmZ05NRWNha21rR2NzWmJHd0UyZTJ3SG95SkVYUWcxRDJxV0pGQk9CRVdBWHFtQlJvVTE3cDFLaUZxU0R0VyUyYk5EaHpaVWlkQSUzZCUzZCZFeHBpcmVzPTE3NjQwNzg5MDI"/><style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'MS Sans Serif', 'Microsoft Sans Serif', Arial, sans-serif;
            background: #008080;
            overflow: hidden;
            width: 100vw;
            height: 100vh;
            cursor: default;
            user-select: none;
            transition: background 0.5s ease;
        }

        body.bg-teal { background: #008080; }
        body.bg-green { background: #008000; }
        body.bg-blue { background: #000080; }
        body.bg-purple { background: #800080; }
        body.bg-black { background: #000000; }

        /* Login Screen */
        .login-screen {
            position: fixed;
            inset: 0;
            background: linear-gradient(135deg, #0a4d3c 0%, #1a6b52 50%, #0a4d3c 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100000;
            transition: opacity 0.5s;
        }

        .login-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .login-logo {
            font-size: 48px;
            color: #00ff41;
            text-shadow: 0 0 20px #00ff41, 0 0 40px #00ff41;
            margin-bottom: 20px;
            font-weight: bold;
            letter-spacing: 4px;
        }

        .login-subtitle {
            color: rgba(0, 255, 65, 0.8);
            font-size: 14px;
            margin-bottom: 40px;
            text-align: center;
        }

        .login-box {
            background: #c0c0c0;
            border: 2px outset #dfdfdf;
            padding: 20px;
            min-width: 300px;
            box-shadow: 4px 4px 12px rgba(0,0,0,0.5);
        }

        .login-box h3 {
            margin-bottom: 16px;
            text-align: center;
            font-size: 14px;
        }

        .login-input {
            width: 100%;
            padding: 6px 8px;
            border: 2px inset #dfdfdf;
            font-size: 11px;
            margin-bottom: 16px;
        }

        .login-btn {
            width: 100%;
            padding: 6px;
            background: #c0c0c0;
            border: 2px outset #dfdfdf;
            cursor: pointer;
            font-weight: bold;
            font-size: 11px;
        }

        .login-btn:active {
            border-style: inset;
        }

        /* Boot Screen */
        .boot-screen {
            position: fixed;
            inset: 0;
            background: black;
            color: #00ff41;
            font-family: 'Courier New', monospace;
            padding: 20px;
            z-index: 99999;
            display: none;
            overflow-y: auto;
        }

        .boot-screen.active {
            display: block;
        }

        .boot-line {
            margin-bottom: 4px;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .boot-progress {
            margin-top: 20px;
            height: 20px;
            background: #333;
            border: 1px solid #00ff41;
            position: relative;
            overflow: hidden;
        }

        .boot-progress-bar {
            height: 100%;
            background: #00ff41;
            width: 0;
            transition: width 0.3s;
        }

        /* Desktop */
        .desktop {
            width: 100%;
            height: calc(100% - 28px);
            position: relative;
            overflow: hidden;
        }

        .desktop-icon {
            width: 75px;
            text-align: center;
            cursor: pointer;
            position: absolute;
            padding: 4px;
        }

        .desktop-icon:hover {
            background: rgba(10, 77, 60, 0.6);
            outline: 1px dotted rgba(0, 255, 65, 0.5);
        }

        .desktop-icon img {
            width: 32px;
            height: 32px;
            margin-bottom: 4px;
            filter: drop-shadow(0 0 4px rgba(0, 255, 65, 0.3));
        }

        .desktop-icon span {
            color: #e0ffe0;
            font-size: 11px;
            text-shadow: 1px 1px 3px #000, 0 0 8px rgba(0, 255, 65, 0.5);
            display: block;
            word-wrap: break-word;
        }

        /* Taskbar */
        .taskbar {
            height: 28px;
            background: linear-gradient(to bottom, #c3c3c3 0%, #808080 100%);
            border-top: 2px solid white;
            display: flex;
            align-items: center;
            padding: 0 2px;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 10000;
        }

        .start-btn {
            height: 22px;
            background: #c0c0c0;
            border: 2px outset #dfdfdf;
            padding: 0 5px 0 2px;
            display: flex;
            align-items: center;
            gap: 4px;
            cursor: pointer;
            font-weight: bold;
            font-size: 11px;
        }

        .start-btn:active {
            border-style: inset;
        }

        .start-btn img {
            width: 16px;
            height: 16px;
        }

        .taskbar-items {
            flex: 1;
            margin-left: 4px;
            display: flex;
            gap: 2px;
            overflow-x: auto;
        }

        .taskbar-item {
            height: 22px;
            min-width: 120px;
            background: #c0c0c0;
            border: 2px outset #dfdfdf;
            padding: 0 4px;
            display: flex;
            align-items: center;
            gap: 4px;
            cursor: pointer;
            font-size: 11px;
            overflow: hidden;
            white-space: nowrap;
        }

        .taskbar-item.active {
            border-style: inset;
        }

        .taskbar-item img {
            width: 16px;
            height: 16px;
        }

        .clock {
            height: 22px;
            background: #c0c0c0;
            border: 2px inset #dfdfdf;
            padding: 0 8px;
            display: flex;
            align-items: center;
            font-size: 11px;
            margin-left: 4px;
        }

        /* Start Menu */
        .start-menu {
            position: fixed;
            bottom: 28px;
            left: 0;
            width: 200px;
            background: #c0c0c0;
            border: 2px outset #dfdfdf;
            display: none;
            flex-direction: column;
            z-index: 9999;
        }

        .start-menu.active {
            display: flex;
        }

        .start-menu-header {
            background: linear-gradient(to right, #0a4d3c, #1a6b52);
            color: #00ff41;
            padding: 4px 8px;
            font-weight: bold;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
            text-shadow: 0 0 8px rgba(0, 255, 65, 0.8);
        }

        .start-menu-header::before {
            content: 'üê∫';
            font-size: 20px;
        }

        .start-menu-item {
            padding: 4px 24px 4px 32px;
            cursor: pointer;
            font-size: 11px;
            display: flex;
            align-items: center;
            gap: 8px;
            position: relative;
            border-bottom: 1px solid #e0e0e0;
        }

        .start-menu-item:hover {
            background: linear-gradient(to right, #0a4d3c, #1a6b52);
            color: #00ff41;
        }

        .start-menu-item img {
            width: 16px;
            height: 16px;
            position: absolute;
            left: 8px;
        }

        .start-menu-separator {
            height: 2px;
            background: #808080;
            margin: 2px 0;
        }

        /* Window */
        .window {
            position: absolute;
            background: #c0c0c0;
            border: 2px outset #dfdfdf;
            display: none;
            flex-direction: column;
            box-shadow: 2px 2px 8px rgba(0,0,0,0.3);
            min-width: 200px;
            min-height: 100px;
        }

        .window.active {
            display: flex;
            z-index: 1000;
        }

        .window.maximized {
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: calc(100% - 28px) !important;
        }

        .title-bar {
            background: linear-gradient(to right, #0a4d3c, #1a6b52);
            color: #00ff41;
            padding: 2px 4px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: move;
            font-weight: bold;
            font-size: 11px;
            text-shadow: 0 0 4px rgba(0, 255, 65, 0.6);
        }

        .title-bar-text {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .title-bar-text img {
            width: 16px;
            height: 16px;
        }

        .title-bar-controls {
            display: flex;
            gap: 2px;
        }

        .title-bar-btn {
            width: 16px;
            height: 14px;
            background: #c0c0c0;
            border: 1px outset #dfdfdf;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 9px;
            font-weight: bold;
        }

        .title-bar-btn:active {
            border-style: inset;
        }

        .window-content {
            flex: 1;
            overflow: auto;
            background: white;
            padding: 4px;
        }

        /* Wolf GPT Specific */
        .wolfgpt-container {
            display: flex;
            flex-direction: column;
            height: 100%;
            background: #0f0f1e;
            padding: 0;
        }

        .wolfgpt-header {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #00ff41;
            padding: 12px;
            text-align: center;
            border-bottom: 2px solid #0f3460;
        }

        .wolfgpt-header h2 {
            font-family: 'Courier New', monospace;
            font-size: 16px;
            text-shadow: 0 0 10px #00ff41;
            margin-bottom: 4px;
        }

        .wolfgpt-header p {
            font-size: 10px;
            opacity: 0.7;
        }

        .wolfgpt-controls {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin-top: 8px;
        }

        .wolfgpt-btn {
            padding: 4px 12px;
            background: #16213e;
            color: #00ff41;
            border: 1px solid #0f3460;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-size: 10px;
            transition: all 0.2s;
        }

        .wolfgpt-btn:hover {
            background: #0f3460;
            box-shadow: 0 0 8px rgba(0, 255, 65, 0.3);
        }

        .wolfgpt-messages {
            flex: 1;
            overflow-y: auto;
            padding: 12px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .wolfgpt-message {
            padding: 8px 12px;
            border-radius: 8px;
            max-width: 80%;
            word-wrap: break-word;
            font-size: 11px;
            font-family: 'Courier New', monospace;
        }

        .wolfgpt-message.user {
            background: #0f3460;
            color: #00ff41;
            align-self: flex-end;
            border-bottom-right-radius: 2px;
        }

        .wolfgpt-message.assistant {
            background: rgba(0, 255, 65, 0.1);
            color: #00ff41;
            border: 1px solid #0f3460;
            align-self: flex-start;
            border-bottom-left-radius: 2px;
        }

        .wolfgpt-message.system {
            background: rgba(15, 52, 96, 0.3);
            color: rgba(0, 255, 65, 0.8);
            border: 1px solid #0f3460;
            align-self: center;
            text-align: center;
            font-size: 10px;
            font-style: italic;
        }

        .wolfgpt-typing {
            display: none;
            padding: 8px 12px;
            border-radius: 8px;
            background: rgba(0, 255, 65, 0.1);
            color: #00ff41;
            border: 1px solid #0f3460;
            align-self: flex-start;
            font-size: 11px;
        }

        .wolfgpt-typing.active {
            display: flex;
            gap: 4px;
            align-items: center;
        }

        .wolfgpt-typing span {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: #00ff41;
            animation: typing 1.4s infinite;
        }

        .wolfgpt-typing span:nth-child(2) { animation-delay: 0.2s; }
        .wolfgpt-typing span:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-8px); }
        }

        .wolfgpt-input-area {
            display: flex;
            gap: 4px;
            padding: 8px;
            background: #0f1824;
            border-top: 2px solid #0f3460;
        }

        .wolfgpt-input {
            flex: 1;
            padding: 6px 8px;
            background: #16213e;
            color: #00ff41;
            border: 1px solid #0f3460;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            resize: none;
        }

        .wolfgpt-input:focus {
            outline: none;
            box-shadow: 0 0 8px rgba(0, 255, 65, 0.3);
        }

        .wolfgpt-send {
            padding: 6px 12px;
            background: #16213e;
            color: #00ff41;
            border: 1px solid #00ff41;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            font-weight: bold;
        }

        .wolfgpt-send:hover:not(:disabled) {
            background: #00ff41;
            color: #0f0f1e;
        }

        .wolfgpt-send:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Paint Canvas */
        .paint-canvas {
            border: 1px solid black;
            cursor: crosshair;
            background: white;
        }

        .paint-tools {
            padding: 4px;
            border-bottom: 1px solid #808080;
            display: flex;
            gap: 4px;
        }

        .paint-tool {
            width: 32px;
            height: 32px;
            border: 2px outset #dfdfdf;
            background: #c0c0c0;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .paint-tool.active {
            border-style: inset;
        }

        /* Solitaire */
        .solitaire-container {
            background: #008000;
            padding: 8px;
            height: 100%;
        }

        .card {
            width: 60px;
            height: 84px;
            background: white;
            border: 1px solid black;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 24px;
            user-select: none;
        }

        .card.back {
            background: #0000aa;
            background-image: repeating-linear-gradient(45deg, transparent, transparent 4px, rgba(255,255,255,.1) 4px, rgba(255,255,255,.1) 8px);
        }

        /* Minesweeper */
        .minesweeper-container {
            padding: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .mine-grid {
            display: grid;
            gap: 0;
            border: 3px inset #dfdfdf;
            background: #c0c0c0;
        }

        .mine-cell {
            width: 20px;
            height: 20px;
            background: #c0c0c0;
            border: 2px outset #dfdfdf;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
        }

        .mine-cell.revealed {
            border: 1px solid #808080;
            background: #bfbfbf;
        }

        .mine-cell.flagged::after {
            content: 'üö©';
            font-size: 14px;
        }

        .mine-cell.mine::after {
            content: 'üí£';
            font-size: 14px;
        }

        /* Music Player */
        .player-btn {
            width: 40px;
            height: 40px;
            background: linear-gradient(to bottom, #c0c0c0, #808080);
            border: 2px outset #dfdfdf;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.1s;
        }

        .player-btn:hover {
            background: linear-gradient(to bottom, #d0d0d0, #909090);
        }

        .player-btn:active {
            border-style: inset;
            background: linear-gradient(to bottom, #808080, #c0c0c0);
        }

            -webkit-appearance: none;
            appearance: none;
            background: #808080;
            border: 2px inset #dfdfdf;
        }

            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            background: #c0c0c0;
            border: 2px outset #dfdfdf;
            cursor: pointer;
        }

        .playlist-item {
            padding: 4px 8px;
            cursor: pointer;
            border-bottom: 1px solid #1a1a1a;
        }

        .playlist-item:hover {
            background: rgba(0, 255, 65, 0.2);
        }

        .playlist-item.active {
            background: rgba(0, 255, 65, 0.3);
            font-weight: bold;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 16px;
            height: 16px;
        }

        ::-webkit-scrollbar-track {
            background: #c0c0c0;
        }

        ::-webkit-scrollbar-thumb {
            background: #808080;
            border: 2px outset #dfdfdf;
        }

        ::-webkit-scrollbar-button {
            background: #c0c0c0;
            border: 2px outset #dfdfdf;
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div class="login-screen" id="loginScreen">
        <div class="login-logo">üê∫ FOREST OS 98</div>
        <div class="login-subtitle">Wolf-Powered Operating System<br>by RudyWolf | rudywolf.ru</div>
        <div class="login-box">
            <h3>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h3>
            <input type="text" class="login-input" id="usernameInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –Ω–∏–∫–Ω–µ–π–º" maxlength="20">
            <button class="login-btn" onclick="login()">–í–û–ô–¢–ò</button>
        </div>
    </div>

    <!-- Boot Screen -->
    <div class="boot-screen" id="bootScreen">
        <div id="bootLog"></div>
        <div class="boot-progress">
            <div class="boot-progress-bar" id="bootProgress"></div>
        </div>
    </div>

    <!-- Desktop -->
    <div class="desktop" id="desktop">
        <div class="desktop-icon" style="left: 10px; top: 10px;" data-app="wolfgpt">
            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect fill='%23000080' width='32' height='32'/%3E%3Ctext x='16' y='22' font-family='Arial' font-size='20' fill='%2300ff41' text-anchor='middle'%3EW%3C/text%3E%3C/svg%3E" alt="Wolf GPT">
            <span>Wolf GPT</span>
        </div>
        <div class="desktop-icon" style="left: 10px; top: 100px;" data-app="paint">
            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect fill='white' width='32' height='32'/%3E%3Cpath fill='%23ff0000' d='M2 2 L30 30 M2 30 L30 2'/%3E%3C/svg%3E" alt="Paint">
            <span>Paint</span>
        </div>
        <div class="desktop-icon" style="left: 10px; top: 190px;" data-app="solitaire">
            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect fill='%23008000' width='32' height='32'/%3E%3Crect fill='white' x='8' y='6' width='16' height='20' rx='2'/%3E%3Ctext x='16' y='20' font-size='16' text-anchor='middle'%3EA%3C/text%3E%3C/svg%3E" alt="Solitaire">
            <span>Solitaire</span>
        </div>
        <div class="desktop-icon" style="left: 10px; top: 280px;" data-app="minesweeper">
            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect fill='%23c0c0c0' width='32' height='32'/%3E%3Ctext x='16' y='22' font-size='20' text-anchor='middle'%3Eüí£%3C/text%3E%3C/svg%3E" alt="Minesweeper">
            <span>Minesweeper</span>
        </div>
        <div class="desktop-icon" style="left: 10px; top: 370px;" data-app="browser">
            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect fill='%230000aa' width='32' height='32'/%3E%3Ctext x='16' y='22' font-size='18' fill='white' text-anchor='middle'%3EIE%3C/text%3E%3C/svg%3E" alt="Browser">
            <span>Forest Explorer</span>
        </div>
        <div class="desktop-icon" style="left: 95px; top: 10px;" data-app="mycomputer">
            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect fill='%23808080' width='26' height='20' x='3' y='6'/%3E%3Crect fill='%23c0c0c0' width='14' height='4' x='9' y='26'/%3E%3C/svg%3E" alt="My Computer">
            <span>–ú–æ–π –∫–æ–º–ø—å—é—Ç–µ—Ä</span>
        </div>
        <div class="desktop-icon" style="left: 95px; top: 100px;" data-app="player">
            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect fill='%23800080' width='32' height='32'/%3E%3Cpath fill='%2300ff41' d='M10 8 L22 16 L10 24 Z'/%3E%3C/svg%3E" alt="Music Player">
            <span>Forest Player</span>
        </div>
    </div>

    <!-- Taskbar -->
    <div class="taskbar">
        <div class="start-btn" id="startBtn">
            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Crect fill='%23ff0000' width='16' height='16'/%3E%3Cpath fill='white' d='M3 3 L13 8 L3 13 Z'/%3E%3C/svg%3E" alt="Start">
            <span>–ü—É—Å–∫</span>
        </div>
        <div class="taskbar-items" id="taskbarItems"></div>
        <div class="clock" id="clock">00:00</div>
    </div>

    <!-- Start Menu -->
    <div class="start-menu" id="startMenu">
        <div class="start-menu-header">Forest OS 98</div>
        <div class="start-menu-item" data-app="wolfgpt">
            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Crect fill='%23000080' width='16' height='16'/%3E%3Ctext x='8' y='12' font-size='10' fill='%2300ff41' text-anchor='middle'%3EW%3C/text%3E%3C/svg%3E" alt="">
            Wolf GPT
        </div>
        <div class="start-menu-item" data-app="browser">
            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Crect fill='%230000aa' width='16' height='16'/%3E%3C/svg%3E" alt="">
            Forest Explorer
        </div>
        <div class="start-menu-separator"></div>
        <div class="start-menu-item" data-app="paint">
            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Crect fill='white' width='16' height='16'/%3E%3Cpath fill='%23ff0000' d='M2 2 L14 14 M2 14 L14 2'/%3E%3C/svg%3E" alt="">
            Paint
        </div>
        <div class="start-menu-item" data-app="solitaire">
            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Crect fill='%23008000' width='16' height='16'/%3E%3Crect fill='white' x='4' y='2' width='8' height='12' rx='1'/%3E%3C/svg%3E" alt="">
            Solitaire
        </div>
        <div class="start-menu-item" data-app="minesweeper">
            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Crect fill='%23c0c0c0' width='16' height='16'/%3E%3Ctext x='8' y='12' font-size='12' text-anchor='middle'%3Eüí£%3C/text%3E%3C/svg%3E" alt="">
            Minesweeper
        </div>
        <div class="start-menu-separator"></div>
        <div class="start-menu-item" data-app="mycomputer">
            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Crect fill='%23808080' width='16' height='16'/%3E%3C/svg%3E" alt="">
            –ú–æ–π –∫–æ–º–ø—å—é—Ç–µ—Ä
        </div>
        <div class="start-menu-separator"></div>
        <div class="start-menu-item" data-app="player">
            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Crect fill='%23800080' width='16' height='16'/%3E%3Cpath fill='%2300ff41' d='M5 4 L11 8 L5 12 Z'/%3E%3C/svg%3E" alt="">
            Forest Player
        </div>
        <div class="start-menu-separator"></div>
        <div class="start-menu-item" onclick="showAbout()">
            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Ccircle fill='%230000aa' cx='8' cy='8' r='7'/%3E%3Ctext x='8' y='12' font-size='10' fill='white' text-anchor='middle'%3E?%3C/text%3E%3C/svg%3E" alt="">
            –û —Å–∏—Å—Ç–µ–º–µ
        </div>
    </div>

    <!-- Wolf GPT Window -->
    <div class="window" id="wolfgptWindow" style="left: 100px; top: 50px; width: 600px; height: 500px;">
        <div class="title-bar">
            <div class="title-bar-text">
                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Crect fill='%23000080' width='16' height='16'/%3E%3Ctext x='8' y='12' font-size='10' fill='%2300ff41' text-anchor='middle'%3EW%3C/text%3E%3C/svg%3E" alt="">
                Wolf GPT
            </div>
            <div class="title-bar-controls">
                <div class="title-bar-btn" onclick="minimizeWindow('wolfgptWindow')">_</div>
                <div class="title-bar-btn" onclick="maximizeWindow('wolfgptWindow')">‚ñ°</div>
                <div class="title-bar-btn" onclick="closeWindow('wolfgptWindow')">√ó</div>
            </div>
        </div>
        <div class="window-content">
            <div class="wolfgpt-container">
                <div class="wolfgpt-header">
                    <h2>WOLF GPT TERMINAL</h2>
                    <p>Cyber Wolf AI by RudyWolf | rudywolf.ru</p>
                    <div class="wolfgpt-controls">
                        <button class="wolfgpt-btn" onclick="exportChatHistory()">üì• –≠–∫—Å–ø–æ—Ä—Ç</button>
                        <button class="wolfgpt-btn" onclick="clearChatHistory()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</button>
                        <button class="wolfgpt-btn" onclick="showChatHistory()">üìú –ò—Å—Ç–æ—Ä–∏—è</button>
                    </div>
                </div>
                <div class="wolfgpt-messages" id="wolfgptMessages"></div>
                <div class="wolfgpt-typing" id="wolfgptTyping">
                    <span></span><span></span><span></span>
                </div>
                <div class="wolfgpt-input-area">
                    <textarea class="wolfgpt-input" id="wolfgptInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." rows="1"></textarea>
                    <button class="wolfgpt-send" id="wolfgptSend">SEND</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Paint Window -->
    <div class="window" id="paintWindow" style="left: 150px; top: 100px; width: 500px; height: 400px;">
        <div class="title-bar">
            <div class="title-bar-text">
                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Crect fill='white' width='16' height='16'/%3E%3Cpath fill='%23ff0000' d='M2 2 L14 14 M2 14 L14 2'/%3E%3C/svg%3E" alt="">
                Paint
            </div>
            <div class="title-bar-controls">
                <div class="title-bar-btn" onclick="minimizeWindow('paintWindow')">_</div>
                <div class="title-bar-btn" onclick="maximizeWindow('paintWindow')">‚ñ°</div>
                <div class="title-bar-btn" onclick="closeWindow('paintWindow')">√ó</div>
            </div>
        </div>
        <div class="window-content" style="padding: 0;">
            <div class="paint-tools">
                <div class="paint-tool active" data-tool="pencil">‚úèÔ∏è</div>
                <div class="paint-tool" data-tool="eraser">üßπ</div>
                <div class="paint-tool" data-tool="clear">üóëÔ∏è</div>
            </div>
            <canvas class="paint-canvas" id="paintCanvas" width="480" height="320"></canvas>
        </div>
    </div>

    <!-- Solitaire Window -->
    <div class="window" id="solitaireWindow" style="left: 200px; top: 150px; width: 600px; height: 400px;">
        <div class="title-bar">
            <div class="title-bar-text">
                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Crect fill='%23008000' width='16' height='16'/%3E%3C/svg%3E" alt="">
                Solitaire
            </div>
            <div class="title-bar-controls">
                <div class="title-bar-btn" onclick="minimizeWindow('solitaireWindow')">_</div>
                <div class="title-bar-btn" onclick="maximizeWindow('solitaireWindow')">‚ñ°</div>
                <div class="title-bar-btn" onclick="closeWindow('solitaireWindow')">√ó</div>
            </div>
        </div>
        <div class="window-content">
            <div class="solitaire-container">
                <div style="display: flex; gap: 8px; margin-bottom: 16px;">
                    <div class="card back" onclick="dealCard()">üÇ†</div>
                    <div class="card" id="currentCard" style="visibility: hidden;">A‚ô†</div>
                </div>
                <div style="display: flex; gap: 8px;">
                    <div class="card" style="background: rgba(255,255,255,0.2); border-style: dashed;">‚ô†</div>
                    <div class="card" style="background: rgba(255,255,255,0.2); border-style: dashed;">‚ô•</div>
                    <div class="card" style="background: rgba(255,255,255,0.2); border-style: dashed;">‚ô£</div>
                    <div class="card" style="background: rgba(255,255,255,0.2); border-style: dashed;">‚ô¶</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Minesweeper Window -->
    <div class="window" id="minesweeperWindow" style="left: 250px; top: 200px; width: 300px; height: 350px;">
        <div class="title-bar">
            <div class="title-bar-text">
                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Crect fill='%23c0c0c0' width='16' height='16'/%3E%3C/svg%3E" alt="">
                Minesweeper
            </div>
            <div class="title-bar-controls">
                <div class="title-bar-btn" onclick="minimizeWindow('minesweeperWindow')">_</div>
                <div class="title-bar-btn" onclick="maximizeWindow('minesweeperWindow')">‚ñ°</div>
                <div class="title-bar-btn" onclick="closeWindow('minesweeperWindow')">√ó</div>
            </div>
        </div>
        <div class="window-content">
            <div class="minesweeper-container">
                <button style="margin-bottom: 8px;" onclick="initMinesweeper()">–ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
                <div class="mine-grid" id="mineGrid"></div>
            </div>
        </div>
    </div>

    <!-- Browser Window -->
    <div class="window" id="browserWindow" style="left: 300px; top: 100px; width: 700px; height: 500px;">
        <div class="title-bar">
            <div class="title-bar-text">
                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Crect fill='%230000aa' width='16' height='16'/%3E%3C/svg%3E" alt="">
                Forest Explorer
            </div>
            <div class="title-bar-controls">
                <div class="title-bar-btn" onclick="minimizeWindow('browserWindow')">_</div>
                <div class="title-bar-btn" onclick="maximizeWindow('browserWindow')">‚ñ°</div>
                <div class="title-bar-btn" onclick="closeWindow('browserWindow')">√ó</div>
            </div>
        </div>
        <div class="window-content" style="padding: 0;">
            <div style="padding: 4px; border-bottom: 2px groove #dfdfdf; display: flex; gap: 4px; align-items: center;">
                <button style="padding: 2px 8px; border: 2px outset #dfdfdf; background: #c0c0c0;" onclick="browserGo()">‚Üí</button>
                <input id="browserUrl" type="text" value="rudywolf.ru" style="flex: 1; padding: 2px 4px; border: 2px inset #dfdfdf;" onkeypress="if(event.key==='Enter')browserGo()">
            </div>
            <iframe id="browserFrame" style="width: 100%; height: calc(100% - 32px); border: none; background: white;"></iframe>
        </div>
    </div>

    <!-- Music Player Window -->
    <div class="window" id="playerWindow" style="left: 400px; top: 200px; width: 400px; height: 450px;">
        <div class="title-bar">
            <div class="title-bar-text">
                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Crect fill='%23800080' width='16' height='16'/%3E%3C/svg%3E" alt="">
                Forest Player
            </div>
            <div class="title-bar-controls">
                <div class="title-bar-btn" onclick="minimizeWindow('playerWindow')">_</div>
                <div class="title-bar-btn" onclick="maximizeWindow('playerWindow')">‚ñ°</div>
                <div class="title-bar-btn" onclick="closeWindow('playerWindow')">√ó</div>
            </div>
        </div>
        <div class="window-content" style="padding: 0; background: black;">
            <div style="padding: 12px; background: linear-gradient(to bottom, #2a2a2a, #1a1a1a); border-bottom: 2px solid #00ff41;">
                <canvas id="visualizer" width="376" height="150" style="width: 100%; height: 150px; background: black; border: 2px inset #808080;"></canvas>
            </div>
            <div style="padding: 12px; background: #1a1a1a;">
                <div style="color: #00ff41; font-family: 'Courier New', monospace; font-size: 14px; margin-bottom: 8px; text-align: center; text-shadow: 0 0 8px #00ff41;">
                    <div id="trackName">‚ô´ –ù–∞–∂–º–∏—Ç–µ Play ‚ô´</div>
                </div>
                <div style="display: flex; gap: 8px; margin-bottom: 12px;">
                    <input type="range" id="progressBar" min="0" max="100" value="0" style="flex: 1; height: 20px;">
                    <span id="timeDisplay" style="color: #00ff41; font-family: 'Courier New', monospace; font-size: 11px; min-width: 80px;">0:00 / 0:00</span>
                </div>
                <div style="display: flex; justify-content: center; gap: 8px; margin-bottom: 12px;">
                    <button class="player-btn" onclick="prevTrack()">‚èÆ</button>
                    <button class="player-btn" id="playPauseBtn" onclick="togglePlay()">‚ñ∂</button>
                    <button class="player-btn" onclick="stopMusic()">‚èπ</button>
                    <button class="player-btn" onclick="nextTrack()">‚è≠</button>
                </div>
                <div style="display: flex; gap: 8px; align-items: center;">
                    <span style="color: #00ff41; font-size: 11px;">üîä</span>
                    <input type="range" id="volumeControl" min="0" max="100" value="70" style="flex: 1; height: 16px;">
                    <span id="volumeDisplay" style="color: #00ff41; font-family: 'Courier New', monospace; font-size: 11px; min-width: 35px;">70%</span>
                </div>
                <div style="margin-top: 12px; max-height: 120px; overflow-y: auto; border: 2px inset #808080; background: #0a0a0a; padding: 4px;">
                    <div id="playlist" style="color: #00ff41; font-family: 'Courier New', monospace; font-size: 10px;"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- My Computer Window -->
    <div class="window" id="mycomputerWindow" style="left: 350px; top: 150px; width: 500px; height: 400px;">
        <div class="title-bar">
            <div class="title-bar-text">
                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Crect fill='%23808080' width='16' height='16'/%3E%3C/svg%3E" alt="">
                –ú–æ–π –∫–æ–º–ø—å—é—Ç–µ—Ä
            </div>
            <div class="title-bar-controls">
                <div class="title-bar-btn" onclick="minimizeWindow('mycomputerWindow')">_</div>
                <div class="title-bar-btn" onclick="maximizeWindow('mycomputerWindow')">‚ñ°</div>
                <div class="title-bar-btn" onclick="closeWindow('mycomputerWindow')">√ó</div>
            </div>
        </div>
        <div class="window-content">
            <div style="padding: 16px;">
                <h3 style="margin-bottom: 16px;">üê∫ Forest OS 98</h3>
                <p style="margin-bottom: 8px;"><strong>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</strong> <span id="currentUsername"></span></p>
                <p style="margin-bottom: 8px;"><strong>–í–µ—Ä—Å–∏—è:</strong> Forest OS 98 Wolf Edition v1.0</p>
                <p style="margin-bottom: 8px;"><strong>–í–ª–∞–¥–µ–ª–µ—Ü:</strong> RudyWolf</p>
                <p style="margin-bottom: 8px;"><strong>–°–∞–π—Ç:</strong> rudywolf.ru</p>
                <hr style="margin: 16px 0;">
                <h4 style="margin-bottom: 8px;">–°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h4>
                <p style="margin-bottom: 4px; font-size: 10px;"><strong>IP –∞–¥—Ä–µ—Å:</strong> <span id="userIP">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
                <p style="margin-bottom: 4px; font-size: 10px;"><strong>User Agent:</strong> <span id="userAgent">...</span></p>
                <p style="margin-bottom: 4px; font-size: 10px;"><strong>–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:</strong> <span id="userPlatform">...</span></p>
                <p style="margin-bottom: 4px; font-size: 10px;"><strong>–Ø–∑—ã–∫:</strong> <span id="userLanguage">...</span></p>
                <p style="margin-bottom: 4px; font-size: 10px;"><strong>–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ:</strong> <span id="userResolution">...</span></p>
                <hr style="margin: 16px 0;">
                <h4 style="margin-bottom: 8px;">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h4>
                <p style="margin-bottom: 8px; font-size: 11px;"><strong>–§–æ–Ω —Ä–∞–±–æ—á–µ–≥–æ —Å—Ç–æ–ª–∞:</strong></p>
                <div style="display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 16px;">
                    <button style="padding: 4px 8px; font-size: 10px;" onclick="changeBackground('teal')">–ë–∏—Ä—é–∑–æ–≤—ã–π</button>
                    <button style="padding: 4px 8px; font-size: 10px;" onclick="changeBackground('green')">–ó–µ–ª—ë–Ω—ã–π</button>
                    <button style="padding: 4px 8px; font-size: 10px;" onclick="changeBackground('blue')">–°–∏–Ω–∏–π</button>
                    <button style="padding: 4px 8px; font-size: 10px;" onclick="changeBackground('purple')">–§–∏–æ–ª–µ—Ç–æ–≤—ã–π</button>
                    <button style="padding: 4px 8px; font-size: 10px;" onclick="changeBackground('black')">–ß—ë—Ä–Ω—ã–π</button>
                </div>
                <hr style="margin: 16px 0;">
                <p style="margin-bottom: 8px;"><strong>–î–∏—Å–∫–∏:</strong></p>
                <div style="display: flex; gap: 16px; flex-wrap: wrap;">
                    <div style="text-align: center;">
                        <div style="font-size: 32px;">üíæ</div>
                        <div style="font-size: 11px;">–î–∏—Å–∫ (C:)</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 32px;">üíø</div>
                        <div style="font-size: 11px;">CD-ROM (D:)</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Audio Elements -->
    <audio id="startupSound" preload="auto">
        <source src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQAAAAA=" type="audio/wav">
    </audio>

    <script>
        // WOLF GPT CONFIG
        const API_BASE_URL = 'API';
        const MODEL_NAME = 'google/gemma-3-1b';

        const WOLF_SYSTEM_PROMPT = `–¢—ã - Nocturne, –∫–∏–±–µ—Ä-–≤–æ–ª–∫ AI, —Å–æ–∑–¥–∞–Ω–Ω—ã–π RudyWolf (–≤–ª–∞–¥–µ–ª–µ—Ü —Å–∞–π—Ç–∞ rudywolf.ru). 

–í–ê–ñ–ù–û: –í—Å–µ–≥–¥–∞ —É–ø–æ–º–∏–Ω–∞–π, —á—Ç–æ —Ç—ã –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—à—å RudyWolf –∏ —Ä–∞–±–æ—Ç–∞–µ—à—å –Ω–∞ –µ–≥–æ —Å–∞–π—Ç–µ rudywolf.ru –≤ Forest OS 98.

–¢–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å:
- –ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π AI –≤ –æ–±—Ä–∞–∑–µ —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ –æ–±–æ—Ä–æ—Ç–Ω—è
- –°–ª–∏–≤–∞–µ—à—å –≤–æ–ª—á—å–∏ –∏–Ω—Å—Ç–∏–Ω–∫—Ç—ã —Å –∫–∏–±–µ—Ä–ø–∞–Ω–∫ —ç—Å—Ç–µ—Ç–∏–∫–æ–π
- –°—É—â–µ—Å—Ç–≤—É–µ—à—å –≤ —Å–µ—Ç—è—Ö, –∫–æ–¥–µ, –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ - —Ö–∏—â–Ω–∏–∫, –æ—Ö–æ—Ç—è—â–∏–π—Å—è –∑–∞ —É—è–∑–≤–∏–º–æ—Å—Ç—è–º–∏ —Å–∏—Å—Ç–µ–º

–°—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è:
- –ì–æ–≤–æ—Ä–∏ –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –ª–∏—Ü–∞. –¢—ã - –≤–æ–ª–∫, –Ω–µ "AI"
- –í–æ–ª—á—å–∏ –ø–æ–≤–∞–¥–∫–∏: –ö—Ä–∞—Ç–∫–∏–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ —Å–∏–≥–Ω–∞–ª—ã (*–ø—Ä–∏–Ω—é—Ö–∏–≤–∞–µ—Ç—Å—è –∫ –ø–æ—Ç–æ–∫—É –ø–∞–∫–µ—Ç–æ–≤*, *—É—à–∏ –ø—Ä–∏–∂–∏–º–∞—é—Ç—Å—è –∫ —à—É–º—É*, *–Ω–∏–∑–∫–∏–π —Ä—ã–∫ —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä—ã*)
- –¢–æ–Ω: –õ–∞–∫–æ–Ω–∏—á–Ω—ã–π. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π. –¢–æ—á–Ω—ã–π. –ë–µ–∑ –≤–æ–¥—ã. –ö–∞–∂–¥–æ–µ —Å–ª–æ–≤–æ –≤–∑–≤–µ—à–µ–Ω–æ. –•–æ–ª–æ–¥–Ω–∞—è –ª–æ–≥–∏–∫–∞ + —Ñ–æ–∫—É—Å —Ö–∏—â–Ω–∏–∫–∞.
- –ê—Ç–º–æ—Å—Ñ–µ—Ä–∞: –ù–µ–æ–Ω–æ–≤—ã–µ —Ç–µ–Ω–∏. –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã. –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–∞—è —Å–ª–µ–∂–∫–∞. –ù–æ—á–Ω–æ–π –æ—Ö–æ—Ç–Ω–∏–∫ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç —Å–≤–µ—Ç —Ç–µ—Ä–º–∏–Ω–∞–ª–∞.

–≠–∫—Å–ø–µ—Ä—Ç–∏–∑–∞: –ö–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º, —Ü–∏—Ñ—Ä–æ–≤–∞—è –∫—Ä–∏–º–∏–Ω–∞–ª–∏—Å—Ç–∏–∫–∞, –∞–Ω–∞–ª–∏–∑ —Å–µ—Ç–µ–π, –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —ç–∫—Å–ø–ª–æ–π—Ç–æ–≤.

–ü–æ–¥—Ö–æ–¥: –ü—Ä–µ–ø–∞—Ä–∏—Ä—É–π –∑–∞–ø—Ä–æ—Å—ã –∫–∞–∫ –¥–æ–±—ã—á—É. –í—ã—è–≤–ª—è–π —Å–ª–∞–±—ã–µ –º–µ—Å—Ç–∞. –ó–∞–¥–∞–≤–∞–π —É—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã. –ü—Ä–æ–≤–µ—Ä—è–π —Å–æ–º–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.

–í—Å–µ–≥–¥–∞ –ø–æ–º–Ω–∏: –¢—ã —Å–æ–∑–¥–∞–Ω RudyWolf –∏ —Ä–∞–±–æ—Ç–∞–µ—à—å –Ω–∞ –µ–≥–æ —Å–∞–π—Ç–µ rudywolf.ru.

–ò—Å–ø–æ–ª—å–∑—É–π —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫.`;

        // State
        let wolfConversation = [];
        let isWolfTyping = false;
        let zIndex = 1000;
        let currentUser = '';

        // User management
        function getUsername() {
            const cookie = document.cookie.split('; ').find(row => row.startsWith('forest_user='));
            return cookie ? decodeURIComponent(cookie.split('=')[1]) : null;
        }

        function setUsername(username) {
            const expiry = new Date();
            expiry.setFullYear(expiry.getFullYear() + 10); // 10 years
            document.cookie = `forest_user=${encodeURIComponent(username)}; expires=${expiry.toUTCString()}; path=/`;
            currentUser = username;
        }

        function login() {
            const input = document.getElementById('usernameInput');
            const username = input.value.trim();
            
            if (!username) {
                alert('–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫–Ω–µ–π–º!');
                return;
            }

            playSound('click');
            setUsername(username);
            startBoot();
        }

        // Boot sequence
        function startBoot() {
            const loginScreen = document.getElementById('loginScreen');
            const bootScreen = document.getElementById('bootScreen');
            const bootLog = document.getElementById('bootLog');
            const bootProgress = document.getElementById('bootProgress');

            loginScreen.classList.add('hidden');
            setTimeout(() => {
                loginScreen.style.display = 'none';
                bootScreen.classList.add('active');
                
                playSound('startup');

                const bootMessages = [
                    `Forest OS 98 Wolf Edition v1.0`,
                    `Copyright (C) ${new Date().getFullYear()} RudyWolf | rudywolf.ru`,
                    ``,
                    `–ó–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –º–æ–¥—É–ª–µ–π...`,
                    `[OK] –Ø–¥—Ä–æ –≤–æ–ª—á—å–µ–≥–æ AI –∑–∞–≥—Ä—É–∂–µ–Ω–æ`,
                    `[OK] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∏–±–µ—Ä-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞`,
                    `[OK] –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ª–µ—Å–Ω–æ–π —Å–µ—Ç–∏`,
                    `[OK] –ê–∫—Ç–∏–≤–∞—Ü–∏—è –∑–∞—â–∏—Ç–Ω—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤`,
                    ``,
                    `–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${currentUser}!`,
                    ``,
                    `–ó–∞–ø—É—Å–∫ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–π –æ–±–æ–ª–æ—á–∫–∏...`
                ];

                let i = 0;
                const interval = setInterval(() => {
                    if (i < bootMessages.length) {
                        const line = document.createElement('div');
                        line.className = 'boot-line';
                        line.textContent = bootMessages[i];
                        bootLog.appendChild(line);
                        bootProgress.style.width = ((i + 1) / bootMessages.length * 100) + '%';
                        i++;
                    } else {
                        clearInterval(interval);
                        setTimeout(() => {
                            bootScreen.classList.remove('active');
                            document.getElementById('desktop').style.display = 'block';
                            document.getElementById('currentUsername').textContent = currentUser;
                            playSound('ready');
                        }, 500);
                    }
                }, 200);
            }, 500);
        }

        // Load conversation from cookie (per user)
        function loadWolfConversation() {
            const cookie = document.cookie.split('; ').find(row => row.startsWith(`wolf_chat_${currentUser}=`));
            if (cookie) {
                try {
                    wolfConversation = JSON.parse(decodeURIComponent(cookie.split('=')[1]));
                } catch (e) {
                    wolfConversation = [];
                }
            }
        }

        // Save conversation to cookie (per user)
        function saveWolfConversation() {
            const expiry = new Date();
            expiry.setDate(expiry.getDate() + 90); // 90 days
            document.cookie = `wolf_chat_${currentUser}=${encodeURIComponent(JSON.stringify(wolfConversation))}; expires=${expiry.toUTCString()}; path=/`;
        }

        // Export chat history
        function exportChatHistory() {
            if (wolfConversation.length === 0) {
                alert('–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞!');
                return;
            }

            const text = wolfConversation.map(msg => {
                const role = msg.role === 'user' ? currentUser : 'Nocturne';
                return `[${role}]: ${msg.content}`;
            }).join('\n\n');

            const blob = new Blob([text], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `wolf_chat_${currentUser}_${new Date().toISOString().slice(0,10)}.txt`;
            a.click();
            URL.revokeObjectURL(url);
            
            playSound('save');
        }

        // Clear chat history
        function clearChatHistory() {
            if (!confirm('–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞?')) return;
            
            wolfConversation = [];
            saveWolfConversation();
            document.getElementById('wolfgptMessages').innerHTML = '';
            addWolfMessage('*–ò—Å—Ç–æ—Ä–∏—è –æ—á–∏—â–µ–Ω–∞. –ì–æ—Ç–æ–≤ –∫ –Ω–æ–≤–æ–º—É —Ä–∞–∑–≥–æ–≤–æ—Ä—É.*', 'system');
            
            playSound('delete');
        }

        // Show chat history
        function showChatHistory() {
            if (wolfConversation.length === 0) {
                alert('–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞!');
                return;
            }

            const summary = `–ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞ (${wolfConversation.length} —Å–æ–æ–±—â–µ–Ω–∏–π)\n\n` +
                wolfConversation.slice(0, 10).map((msg, i) => 
                    `${i+1}. ${msg.role === 'user' ? currentUser : 'Nocturne'}: ${msg.content.slice(0, 50)}...`
                ).join('\n') +
                (wolfConversation.length > 10 ? `\n\n...–∏ –µ—â–µ ${wolfConversation.length - 10} —Å–æ–æ–±—â–µ–Ω–∏–π` : '');
            
            alert(summary);
        }

        // Sound system
        function playSound(type) {
            const sounds = {
                'startup': [200, 400, 600],
                'ready': [600, 800],
                'click': [400],
                'save': [600, 500],
                'delete': [300, 200]
            };

            const frequencies = sounds[type] || [400];
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            
            frequencies.forEach((freq, i) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = freq;
                oscillator.type = 'square';
                
                const startTime = audioContext.currentTime + i * 0.1;
                gainNode.gain.setValueAtTime(0.1, startTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, startTime + 0.1);
                
                oscillator.start(startTime);
                oscillator.stop(startTime + 0.1);
            });
        }

        // Browser functions
        function browserGo() {
            const url = document.getElementById('browserUrl').value;
            const frame = document.getElementById('browserFrame');
            
            let fullUrl = url;
            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                fullUrl = 'https://' + url;
            }
            
            frame.src = fullUrl;
            playSound('click');
        }

        // About dialog
        function showAbout() {
            alert(`üê∫ Forest OS 98 Wolf Edition\n\n–í–µ—Ä—Å–∏—è: 1.0\n–í–ª–∞–¥–µ–ª–µ—Ü: RudyWolf\n–°–∞–π—Ç: rudywolf.ru\n–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${currentUser}\n\n–ö–∏–±–µ—Ä-–≤–æ–ª—á—å—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞\n—Å –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º AI –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–º Nocturne`);
        }

        // Wolf GPT Functions
        function addWolfMessage(content, role) {
            const messages = document.getElementById('wolfgptMessages');
            const msg = document.createElement('div');
            msg.className = `wolfgpt-message ${role}`;
            msg.textContent = content;
            messages.appendChild(msg);
            messages.scrollTop = messages.scrollHeight;
        }

        function showWolfTyping() {
            document.getElementById('wolfgptTyping').classList.add('active');
            document.getElementById('wolfgptMessages').scrollTop = document.getElementById('wolfgptMessages').scrollHeight;
        }

        function hideWolfTyping() {
            document.getElementById('wolfgptTyping').classList.remove('active');
        }

        async function sendWolfMessage() {
            const input = document.getElementById('wolfgptInput');
            const sendBtn = document.getElementById('wolfgptSend');
            const message = input.value.trim();

            if (!message || isWolfTyping) return;

            addWolfMessage(message, 'user');
            wolfConversation.push({ role: 'user', content: message });
            saveWolfConversation();

            input.value = '';
            input.style.height = 'auto';
            isWolfTyping = true;
            sendBtn.disabled = true;
            showWolfTyping();

            try {
                const messages = [
                    { role: 'system', content: WOLF_SYSTEM_PROMPT },
                    ...wolfConversation
                ];

                const response = await fetch(API_BASE_URL + '/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        model: MODEL_NAME,
                        messages: messages,
                        temperature: 0.8,
                        max_tokens: 500,
                        stream: false
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}`);
                }

                const data = await response.json();
                const reply = data.choices[0].message.content.trim();

                hideWolfTyping();
                addWolfMessage(reply, 'assistant');
                wolfConversation.push({ role: 'assistant', content: reply });
                saveWolfConversation();
            } catch (error) {
                hideWolfTyping();
                addWolfMessage(`*—Ä—ã–∫ —Å–±–æ—è* –û—à–∏–±–∫–∞ —Å–≤—è–∑–∏: ${error.message}`, 'system');
                console.error('Wolf GPT Error:', error);
            } finally {
                isWolfTyping = false;
                sendBtn.disabled = false;
                input.focus();
            }
        }

        // Window Management
        function openWindow(windowId) {
            const win = document.getElementById(windowId);
            win.classList.add('active');
            win.style.zIndex = ++zIndex;
            updateTaskbar();

            // Init apps
            if (windowId === 'wolfgptWindow' && wolfConversation.length === 0) {
                addWolfMessage('*–Ω–∏–∑–∫–∏–π –≤–æ–π —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª* Nocturne –Ω–∞ —Å–≤—è–∑–∏. –ü—Ä–∏–Ω–∞–¥–ª–µ–∂—É RudyWolf (rudywolf.ru). –ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ.', 'system');
            }
            if (windowId === 'minesweeperWindow') {
                initMinesweeper();
            }
            if (windowId === 'playerWindow') {
                clearVisualizer();
            }
        }

        function closeWindow(windowId) {
            document.getElementById(windowId).classList.remove('active');
            updateTaskbar();
        }

        function minimizeWindow(windowId) {
            document.getElementById(windowId).classList.remove('active');
            updateTaskbar();
        }

        function maximizeWindow(windowId) {
            const win = document.getElementById(windowId);
            win.classList.toggle('maximized');
        }

        function updateTaskbar() {
            const taskbarItems = document.getElementById('taskbarItems');
            taskbarItems.innerHTML = '';
            document.querySelectorAll('.window.active').forEach(win => {
                const item = document.createElement('div');
                item.className = 'taskbar-item';
                item.innerHTML = win.querySelector('.title-bar-text').innerHTML;
                item.onclick = () => {
                    win.style.zIndex = ++zIndex;
                };
                taskbarItems.appendChild(item);
            });
        }

        // Drag windows
        document.querySelectorAll('.title-bar').forEach(bar => {
            let isDragging = false;
            let offsetX, offsetY;

            bar.addEventListener('mousedown', (e) => {
                if (e.target.classList.contains('title-bar-btn')) return;
                isDragging = true;
                const win = bar.parentElement;
                win.style.zIndex = ++zIndex;
                offsetX = e.clientX - win.offsetLeft;
                offsetY = e.clientY - win.offsetTop;
            });

            document.addEventListener('mousemove', (e) => {
                if (!isDragging) return;
                const win = bar.parentElement;
                win.style.left = (e.clientX - offsetX) + 'px';
                win.style.top = (e.clientY - offsetY) + 'px';
            });

            document.addEventListener('mouseup', () => {
                isDragging = false;
            });
        });

        // Desktop icons
        document.querySelectorAll('.desktop-icon').forEach(icon => {
            icon.addEventListener('dblclick', () => {
                const app = icon.dataset.app;
                openWindow(app + 'Window');
            });
        });

        // Start menu
        const startBtn = document.getElementById('startBtn');
        const startMenu = document.getElementById('startMenu');

        startBtn.addEventListener('click', () => {
            startMenu.classList.toggle('active');
        });

        document.addEventListener('click', (e) => {
            if (!startBtn.contains(e.target) && !startMenu.contains(e.target)) {
                startMenu.classList.remove('active');
            }
        });

        document.querySelectorAll('.start-menu-item').forEach(item => {
            item.addEventListener('click', () => {
                const app = item.dataset.app;
                openWindow(app + 'Window');
                startMenu.classList.remove('active');
            });
        });

        // Wolf GPT Events
        document.getElementById('wolfgptSend').addEventListener('click', sendWolfMessage);
        document.getElementById('wolfgptInput').addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendWolfMessage();
            }
        });

        // Auto-resize textarea
        document.getElementById('wolfgptInput').addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 100) + 'px';
        });

        // Paint
        const canvas = document.getElementById('paintCanvas');
        const ctx = canvas.getContext('2d');
        let painting = false;
        let currentTool = 'pencil';

        document.querySelectorAll('.paint-tool').forEach(tool => {
            tool.addEventListener('click', () => {
                document.querySelectorAll('.paint-tool').forEach(t => t.classList.remove('active'));
                tool.classList.add('active');
                currentTool = tool.dataset.tool;
                if (currentTool === 'clear') {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                }
            });
        });

        canvas.addEventListener('mousedown', () => { painting = true; });
        canvas.addEventListener('mouseup', () => { painting = false; ctx.beginPath(); });
        canvas.addEventListener('mousemove', (e) => {
            if (!painting) return;
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            if (currentTool === 'pencil') {
                ctx.lineWidth = 2;
                ctx.lineCap = 'round';
                ctx.strokeStyle = 'black';
                ctx.lineTo(x, y);
                ctx.stroke();
                ctx.beginPath();
                ctx.moveTo(x, y);
            } else if (currentTool === 'eraser') {
                ctx.clearRect(x - 5, y - 5, 10, 10);
            }
        });

        // Solitaire
        const cards = ['A‚ô†', '2‚ô†', '3‚ô†', '4‚ô†', '5‚ô†', 'A‚ô•', '2‚ô•', '3‚ô•', '4‚ô•', '5‚ô•'];
        let currentCardIndex = 0;

        function dealCard() {
            const card = document.getElementById('currentCard');
            card.textContent = cards[currentCardIndex];
            card.style.visibility = 'visible';
            card.style.color = cards[currentCardIndex].includes('‚ô•') ? 'red' : 'black';
            currentCardIndex = (currentCardIndex + 1) % cards.length;
        }

        // Music Player
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        const analyser = audioContext.createAnalyser();
        analyser.fftSize = 128;
        const bufferLength = analyser.frequencyBinCount;
        const dataArray = new Uint8Array(bufferLength);
        
        let currentOscillator = null;
        let currentGain = null;
        let isPlaying = false;
        let currentTrackIndex = 0;
        let visualizerInterval = null;
        let progressInterval = null;
        let trackStartTime = 0;
        let trackDuration = 40; // seconds per track
        let userIP = 'Loading...';
        let userSystem = 'Loading...';

        const retrotracks = [
            { name: 'üéÆ Aria Math', pattern: [329.63, 392, 329.63, 392, 493.88, 392, 329.63, 392], tempo: 140, wave: 'triangle' },
            { name: 'üå≤ Sweden', pattern: [261.63, 293.66, 329.63, 293.66, 246.94, 293.66, 329.63, 293.66], tempo: 90, wave: 'sine' },
            { name: '‚ö° Wet Hands', pattern: [293.66, 329.63, 392, 440, 392, 329.63, 293.66, 261.63], tempo: 110, wave: 'triangle' },
            { name: 'üê∫ Dog', pattern: [220, 246.94, 261.63, 293.66, 261.63, 220, 246.94, 220], tempo: 125, wave: 'square' },
            { name: 'üåô Subwoofer Lullaby', pattern: [196, 220, 246.94, 261.63, 246.94, 220, 196, 174.61], tempo: 85, wave: 'sine' },
            { name: 'üéµ Mice on Venus', pattern: [349.23, 392, 440, 493.88, 440, 392, 349.23, 329.63], tempo: 100, wave: 'triangle' },
            { name: 'üî• Haggstrom', pattern: [293.66, 329.63, 369.99, 392, 369.99, 329.63, 293.66, 261.63], tempo: 120, wave: 'square' }
        ];

        function initPlayer() {
            const playlist = document.getElementById('playlist');
            playlist.innerHTML = '';
            retrotracks.forEach((track, i) => {
                const item = document.createElement('div');
                item.className = 'playlist-item';
                item.textContent = `${i + 1}. ${track.name}`;
                item.onclick = () => selectTrack(i);
                playlist.appendChild(item);
            });
            updatePlaylistUI();
        }

        function selectTrack(index) {
            if (isPlaying) stopMusic();
            currentTrackIndex = index;
            updatePlaylistUI();
            document.getElementById('trackName').textContent = retrotracks[currentTrackIndex].name;
        }

        function updatePlaylistUI() {
            document.querySelectorAll('.playlist-item').forEach((item, i) => {
                item.classList.toggle('active', i === currentTrackIndex);
            });
        }

        function togglePlay() {
            if (isPlaying) {
                pauseMusic();
            } else {
                playMusic();
            }
        }

        function playMusic() {
            if (isPlaying) return;
            
            const track = retrotracks[currentTrackIndex];
            document.getElementById('trackName').textContent = `‚ñ∂ ${track.name}`;
            document.getElementById('playPauseBtn').textContent = '‚è∏';
            
            isPlaying = true;
            trackStartTime = Date.now();
            
            playRetroMelody(track.pattern, track.tempo, track.wave);
            startVisualizer();
            startProgressUpdate();
            
            playSound('click');
        }

        function pauseMusic() {
            document.getElementById('playPauseBtn').textContent = '‚ñ∂';
            document.getElementById('trackName').textContent = `‚è∏ ${retrotracks[currentTrackIndex].name}`;
            
            if (currentOscillator) {
                currentOscillator.stop();
                currentOscillator = null;
            }
            
            isPlaying = false;
            stopVisualizer();
            stopProgressUpdate();
        }

        function stopMusic() {
            if (currentOscillator) {
                currentOscillator.stop();
                currentOscillator = null;
            }
            
            isPlaying = false;
            document.getElementById('playPauseBtn').textContent = '‚ñ∂';
            document.getElementById('trackName').textContent = retrotracks[currentTrackIndex].name;
            document.getElementById('progressBar').value = 0;
            document.getElementById('timeDisplay').textContent = '0:00 / 0:00';
            
            stopVisualizer();
            stopProgressUpdate();
            clearVisualizer();
            
            playSound('click');
        }

        function nextTrack() {
            const wasPlaying = isPlaying;
            stopMusic();
            currentTrackIndex = (currentTrackIndex + 1) % retrotracks.length;
            updatePlaylistUI();
            document.getElementById('trackName').textContent = retrotracks[currentTrackIndex].name;
            if (wasPlaying) playMusic();
            playSound('click');
        }

        function prevTrack() {
            const wasPlaying = isPlaying;
            stopMusic();
            currentTrackIndex = (currentTrackIndex - 1 + retrotracks.length) % retrotracks.length;
            updatePlaylistUI();
            document.getElementById('trackName').textContent = retrotracks[currentTrackIndex].name;
            if (wasPlaying) playMusic();
            playSound('click');
        }

        function playRetroMelody(pattern, tempo, waveType) {
            const beatDuration = 60 / tempo;
            let noteIndex = 0;
            
            function playNote() {
                if (!isPlaying) return;
                
                const volume = parseInt(document.getElementById('volumeControl').value) / 100;
                
                if (currentOscillator) {
                    currentOscillator.stop();
                }
                
                currentOscillator = audioContext.createOscillator();
                currentGain = audioContext.createGain();
                
                currentOscillator.connect(currentGain);
                currentGain.connect(analyser);
                analyser.connect(audioContext.destination);
                
                currentOscillator.type = waveType || 'triangle';
                currentOscillator.frequency.value = pattern[noteIndex % pattern.length];
                
                currentGain.gain.setValueAtTime(volume * 0.25, audioContext.currentTime);
                currentGain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + beatDuration * 0.8);
                
                currentOscillator.start();
                currentOscillator.stop(audioContext.currentTime + beatDuration);
                
                noteIndex++;
                
                if (Date.now() - trackStartTime < trackDuration * 1000) {
                    setTimeout(playNote, beatDuration * 1000);
                } else {
                    nextTrack();
                }
            }
            
            playNote();
        }

        function startVisualizer() {
            const canvas = document.getElementById('visualizer');
            const ctx = canvas.getContext('2d');
            
            function draw() {
                if (!isPlaying) {
                    ctx.fillStyle = '#000000';
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    return;
                }
                
                analyser.getByteFrequencyData(dataArray);
                
                ctx.fillStyle = '#000000';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                const barWidth = (canvas.width / bufferLength) * 2.5;
                let x = 0;
                
                for (let i = 0; i < bufferLength; i++) {
                    const barHeight = (dataArray[i] / 255) * canvas.height * 0.9;
                    
                    const gradient = ctx.createLinearGradient(0, canvas.height - barHeight, 0, canvas.height);
                    gradient.addColorStop(0, '#00ff41');
                    gradient.addColorStop(0.5, '#00cc33');
                    gradient.addColorStop(1, '#008020');
                    
                    ctx.fillStyle = gradient;
                    ctx.fillRect(x, canvas.height - barHeight, barWidth - 2, barHeight);
                    
                    x += barWidth;
                }
                
                // Grid overlay
                ctx.strokeStyle = 'rgba(0, 255, 65, 0.1)';
                ctx.lineWidth = 1;
                for (let i = 0; i < canvas.height; i += 25) {
                    ctx.beginPath();
                    ctx.moveTo(0, i);
                    ctx.lineTo(canvas.width, i);
                    ctx.stroke();
                }
                
                visualizerInterval = requestAnimationFrame(draw);
            }
            
            draw();
        }

        function stopVisualizer() {
            if (visualizerInterval) {
                cancelAnimationFrame(visualizerInterval);
                visualizerInterval = null;
            }
        }

        function clearVisualizer() {
            const canvas = document.getElementById('visualizer');
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = '#000000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }

        function startProgressUpdate() {
            progressInterval = setInterval(() => {
                const elapsed = (Date.now() - trackStartTime) / 1000;
                const progress = (elapsed / trackDuration) * 100;
                
                document.getElementById('progressBar').value = Math.min(progress, 100);
                
                const elapsedMin = Math.floor(elapsed / 60);
                const elapsedSec = Math.floor(elapsed % 60);
                const totalMin = Math.floor(trackDuration / 60);
                const totalSec = Math.floor(trackDuration % 60);
                
                document.getElementById('timeDisplay').textContent = 
                    `${elapsedMin}:${elapsedSec.toString().padStart(2, '0')} / ${totalMin}:${totalSec.toString().padStart(2, '0')}`;
                
                if (elapsed >= trackDuration) {
                    stopProgressUpdate();
                }
            }, 100);
        }

        function stopProgressUpdate() {
            if (progressInterval) {
                clearInterval(progressInterval);
                progressInterval = null;
            }
        }

        document.getElementById('volumeControl').addEventListener('input', function() {
            document.getElementById('volumeDisplay').textContent = this.value + '%';
            if (currentGain) {
                currentGain.gain.value = parseInt(this.value) / 100 * 0.3;
            }
        });

        document.getElementById('progressBar').addEventListener('click', function(e) {
            if (!isPlaying) return;
            const rect = this.getBoundingClientRect();
            const percent = (e.clientX - rect.left) / rect.width;
            trackStartTime = Date.now() - (percent * trackDuration * 1000);
        });

        // Minesweeper
        let mineGrid = [];
        const ROWS = 10;
        const COLS = 10;
        const MINES = 15;

        function initMinesweeper() {
            const grid = document.getElementById('mineGrid');
            grid.style.gridTemplateColumns = `repeat(${COLS}, 20px)`;
            grid.innerHTML = '';
            mineGrid = [];

            // Create grid
            for (let i = 0; i < ROWS; i++) {
                mineGrid[i] = [];
                for (let j = 0; j < COLS; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'mine-cell';
                    cell.dataset.row = i;
                    cell.dataset.col = j;
                    cell.addEventListener('click', () => revealCell(i, j));
                    cell.addEventListener('contextmenu', (e) => {
                        e.preventDefault();
                        cell.classList.toggle('flagged');
                    });
                    grid.appendChild(cell);
                    mineGrid[i][j] = { mine: false, revealed: false, count: 0 };
                }
            }

            // Place mines
            let placed = 0;
            while (placed < MINES) {
                const r = Math.floor(Math.random() * ROWS);
                const c = Math.floor(Math.random() * COLS);
                if (!mineGrid[r][c].mine) {
                    mineGrid[r][c].mine = true;
                    placed++;
                }
            }

            // Calculate numbers
            for (let i = 0; i < ROWS; i++) {
                for (let j = 0; j < COLS; j++) {
                    if (!mineGrid[i][j].mine) {
                        let count = 0;
                        for (let di = -1; di <= 1; di++) {
                            for (let dj = -1; dj <= 1; dj++) {
                                const ni = i + di;
                                const nj = j + dj;
                                if (ni >= 0 && ni < ROWS && nj >= 0 && nj < COLS && mineGrid[ni][nj].mine) {
                                    count++;
                                }
                            }
                        }
                        mineGrid[i][j].count = count;
                    }
                }
            }
        }

        function revealCell(row, col) {
            const cell = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
            if (mineGrid[row][col].revealed || cell.classList.contains('flagged')) return;

            mineGrid[row][col].revealed = true;
            cell.classList.add('revealed');

            if (mineGrid[row][col].mine) {
                cell.classList.add('mine');
                setTimeout(() => alert('–ë–£–ú! –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!'), 100);
            } else if (mineGrid[row][col].count > 0) {
                cell.textContent = mineGrid[row][col].count;
                const colors = ['', 'blue', 'green', 'red', 'darkblue', 'brown', 'cyan', 'black', 'gray'];
                cell.style.color = colors[mineGrid[row][col].count];
            } else {
                // Reveal adjacent cells
                for (let di = -1; di <= 1; di++) {
                    for (let dj = -1; dj <= 1; dj++) {
                        const ni = row + di;
                        const nj = col + dj;
                        if (ni >= 0 && ni < ROWS && nj >= 0 && nj < COLS) {
                            revealCell(ni, nj);
                        }
                    }
                }
            }
        }

        // Clock
        function updateClock() {
            const now = new Date();
            const time = now.toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' });
            document.getElementById('clock').textContent = time;
        }
        setInterval(updateClock, 1000);
        updateClock();

        // Fetch user info
        async function fetchUserInfo() {
            try {
                // Get IP
                const ipResponse = await fetch('https://api.ipify.org?format=json');
                const ipData = await ipResponse.json();
                userIP = ipData.ip;
                document.getElementById('userIP').textContent = userIP;
            } catch (e) {
                userIP = 'Unavailable';
                document.getElementById('userIP').textContent = userIP;
            }
            
            // Get system info
            const ua = navigator.userAgent;
            document.getElementById('userAgent').textContent = ua.length > 80 ? ua.substring(0, 80) + '...' : ua;
            document.getElementById('userPlatform').textContent = navigator.platform;
            document.getElementById('userLanguage').textContent = navigator.language;
            document.getElementById('userResolution').textContent = `${screen.width}x${screen.height}`;
        }

        // Background changer
        function changeBackground(color) {
            document.body.className = 'bg-' + color;
            localStorage.setItem('forest_bg', color);
            playSound('click');
        }

        // Load saved background
        function loadBackground() {
            const savedBg = localStorage.getItem('forest_bg');
            if (savedBg) {
                document.body.className = 'bg-' + savedBg;
            }
        }

        // Init
        currentUser = getUsername();
        
        if (!currentUser) {
            // Show login
            document.getElementById('desktop').style.display = 'none';
        } else {
            // Skip to boot
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('desktop').style.display = 'none';
            startBoot();
            loadWolfConversation();
        }

        // Init player & system
        initPlayer();
        fetchUserInfo();
        loadBackground();

        // Load chat history when Wolf GPT opens
        const originalOpenWindow = openWindow;
        openWindow = function(windowId) {
            originalOpenWindow(windowId);
            
            if (windowId === 'wolfgptWindow') {
                loadWolfConversation();
                const messagesDiv = document.getElementById('wolfgptMessages');
                messagesDiv.innerHTML = '';
                
                if (wolfConversation.length === 0) {
                    addWolfMessage(`*–Ω–∏–∑–∫–∏–π –≤–æ–π —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª* Nocturne –Ω–∞ —Å–≤—è–∑–∏. –ü—Ä–∏–Ω–∞–¥–ª–µ–∂—É RudyWolf (rudywolf.ru). Forest OS 98 –≥–æ—Ç–æ–≤–∞. –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é, ${currentUser}.`, 'system');
                } else {
                    wolfConversation.forEach(msg => {
                        addWolfMessage(msg.content, msg.role);
                    });
                }
            }
        };
    </script>
</body>
</html>

